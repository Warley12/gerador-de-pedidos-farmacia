<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script src="https://igorescobar.github.io/jQuery-Mask-Plugin/js/jquery.mask.min.js"></script>           



</head>

<body>

  <form id="meuForm">
    <fieldset>

      <label for="vendedor">Vendedor:</label>
      <input type="text" id="vendedor" name="vendedor"><br><br>
      <label for="nome-cliente">Nome do cliente:</label>
      <input type="text" id="nome-cliente" name="nome-cliente"><br><br>
      <label for="endereco">Endereço:</label>
      <input type="text" id="endereco" name="endereco"><br><br>
      <label for="ponto-referencia">Ponto de referência:</label>
      <input type="text" id="ponto-referencia" name="ponto-referencia"><br><br>
      <label for="telefone">Telefone:</label>
      <input type="text" id="telefone" name="telefone"><br><br>
      <label for="valor">Valor do Produto:</label>
      <input type="number" id="valor" name="valor" required class="valor"><br>
      <label for="pagamento">Forma de Pagamento:</label>
      <select id="pagamento" name="pagamento">
        <option value="Cartão">Cartão</option>
        <option value="pix">Pix</option>
        <option value="dinheiro">Dinheiro</option>
        <option value="Pagamento efetuado,somente entregar">Pagamento efetuado</option>
      </select><br>
      <div id="dinheiro-form" style="display:none;">
        <label for="dinheiro">Valor em Dinheiro:</label>
        <input type="number" id="dinheiro" name="dinheiro"><br>
      </div>

      <button id="calcular-troco" type="button">Calcular Troco</button>
  </form>

  <div id="troco-div" style="display:none;">
    <label for="troco-label">Troco:</label>
    <span id="troco-label"></span>
  </div>
  <br>
  <label for="receita">Receita:</label>
  <select id="receita" name="receita" required>
    <option value="">Selecione</option>
    <option value="Sim, obrigatório!">Sim</option>
    <option value="Não, somente entregar">Não</option>
  </select>



  
  <button  type="button"  onclick="salvarDados()">Gerar texto</button>
  </fieldset>
  </form>

  <textarea id="dados-salvos" rows="10"></textarea>


  <button type="button" onclick="enviarWhatsApp()">Enviar pelo WhatsApp</button>



  <script>
    const pagamentoSelect = document.getElementById('pagamento');
    const dinheiroForm = document.getElementById('dinheiro-form');
    const dinheiroInput = document.getElementById('dinheiro');
    const valorInput = document.getElementById('valor');
    const trocoLabel = document.getElementById('troco-label');
    const calcularTrocoButton = document.getElementById('calcular-troco');
    const trocoDiv = document.getElementById('troco-div');

    pagamentoSelect.addEventListener('change', () => {
      if (pagamentoSelect.value === 'dinheiro') {
        dinheiroForm.style.display = 'block';
      } else {
        dinheiroForm.style.display = 'none';
      }
    });

    calcularTrocoButton.addEventListener('click', () => {
      const valor = parseFloat(valorInput.value);
      const dinheiro = parseFloat(dinheiroInput.value || 0);
      const troco = dinheiro - valor;
      trocoLabel.textContent = 'R$ ' + troco.toFixed(2);
      trocoDiv.style.display = 'block';
    });

// função mascara

  document.addEventListener('DOMContentLoaded', function() {
    $('#telefone').mask('(00) 00000-0000');
    


  });


    //função gerar
    function salvarDados() {
      const form = document.getElementById("meuForm");

      const vendedor = form.elements["vendedor"].value;
      const nomeCliente = form.elements["nome-cliente"].value;
      const endereco = form.elements["endereco"].value;
      const pontoReferencia = form.elements["ponto-referencia"].value;
      const telefone = form.elements["telefone"].value;
      const valor = form.elements["valor"].value;
      const pagamento = form.elements["pagamento"].value;
      const dinheiro = form.elements["dinheiro"].value;


      const receita = form.elements["receita"].value;

      let dados = `*Vendedor*: ${vendedor}\n`;
      dados += `*Nome do Cliente(a)*: ${nomeCliente}\n`;
      dados += `*Endereço*: ${endereco}\n`;
      dados += `*Ponto de Referência*: ${pontoReferencia}\n`;
      dados += `*Telefone*: ${telefone}\n`;

      if (valor) {
        dados += `*Valor do Produto*: R$ ${valor}\n`;
      }

      if (pagamento) {
        dados += `*Forma de Pagamento*: ${pagamento}\n`;

        if (pagamento === "dinheiro" && dinheiro) {
          dados += `*Valor em dinheiro*: R$ ${dinheiro}\n`;
        }
      }

      dados += `*Receita*: ${receita}\n`;

      const dadosSalvos = document.getElementById("dados-salvos");
      dadosSalvos.value = dados;
      document.querySelectorAll('#meuForm input:not(#vendedor):not([type="button"]), #meuForm select').forEach(function (input) {
        input.value = '';
      });



    }

    function enviarWhatsApp() {
  const textarea = document.querySelector('#dados-salvos');
  if (!textarea) {
    console.error('Elemento não encontrado');
    return;
  }

  const texto = encodeURIComponent(textarea.value);
  const numero = "+5562984357019";
  const url = `https://wa.me/${numero}?text=${texto}`;
  window.open(url, '_blank');
}

  </script>

</body>

</html>